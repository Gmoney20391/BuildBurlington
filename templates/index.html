<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build Burlington - Solving Our Housing Crisis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: {
                            50: '#dbeafe',
                            100: '#bfdbfe',
                            200: '#93c5fd',
                            300: '#60a5fa',
                            400: '#3b82f6',
                            500: '#2563eb',
                            600: '#1d4ed8',
                            700: '#1e40af',
                            800: '#1e3a8a',
                            900: '#1a365d',
                        }
                    },
                    boxShadow: {
                        'navy': '0 4px 6px -1px rgba(26, 54, 93, 0.1), 0 2px 4px -1px rgba(26, 54, 93, 0.06)',
                    }
                }
            }
        }
    </script>
    <style>
        .hero-pattern {
            background-color: #1a365d;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%233366cc' fill-opacity='0.2'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .hamburger-line {
            display: block;
            width: 25px;
            height: 3px;
            margin: 5px auto;
            background-color: #4b5563;
            transition: all 0.3s ease;
        }
        
        .hamburger-active .hamburger-line:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }
        
        .hamburger-active .hamburger-line:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger-active .hamburger-line:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }
        
        .mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .mobile-menu-open {
            max-height: 500px;
        }
        
        @media (max-width: 950px) {
            .nav-items {
                display: none;
            }
            
            .hamburger-button {
                display: block;
            }
        }
        
        @media (min-width: 951px) {
            .nav-items {
                display: flex;
            }
            
            .hamburger-button {
                display: none;
            }
            
            .mobile-menu {
                display: none;
            }
        }
    </style>
</head>
<body class="font-sans bg-gray-50" id="home-page">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <a href="/" class="flex items-center py-2 text-blue-600">
                        <span class="font-bold text-xl text-navy-900">BuildBurlington</span>
                    </a>
                </div>
                
                <!-- Desktop Navigation Items -->
                <div class="nav-items items-center space-x-6">
                    <a href="/" class="py-2 text-gray-700 hover:text-blue-600">Home</a>
                    <a href="/problem" class="py-2 text-gray-700 hover:text-blue-600">The Problem</a>
                    <a href="/solution" class="py-2 text-gray-700 hover:text-blue-600">The Solution</a>
                    <a href="/action" class="py-2 text-gray-700 hover:text-blue-600">Take Action</a>
                    <a href="/sources" class="py-2 text-gray-700 hover:text-blue-600">Data Sources</a>
                    <a href="/action" class="py-4 px-6 text-white rounded-lg font-medium transition duration-300 bg-navy-900 hover:bg-navy-800">Support the Policy</a>
                </div>
                
                <!-- Hamburger Button -->
                <div class="hamburger-button">
                    <button id="hamburger-btn" class="focus:outline-none">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="mobile-menu bg-white">
                <div class="px-2 pt-2 pb-4 space-y-1">
                    <a href="/" class="block py-2 px-4 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded">Home</a>
                    <a href="/problem" class="block py-2 px-4 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded">The Problem</a>
                    <a href="/solution" class="block py-2 px-4 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded">The Solution</a>
                    <a href="/action" class="block py-2 px-4 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded">Take Action</a>
                    <a href="/sources" class="block py-2 px-4 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded">Data Sources</a>
                    <a href="/action" class="block py-3 px-4 text-white text-center rounded-lg font-medium mt-2 bg-navy-900 hover:bg-navy-800">Support the Policy</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-pattern py-16 md:py-20">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex flex-col lg:flex-row items-center gap-10">
                <!-- Text Content -->
                <div class="w-full lg:w-1/2 text-white text-center lg:text-left">
                    <h1 class="text-4xl md:text-5xl font-bold mb-6">Burlington is facing a <span class="text-yellow-300">housing crisis</span></h1>
                    <p class="text-xl mb-8">Our restrictive zoning laws are making it impossible for young people, seniors, and families to afford homes in our community. But there's a solution.</p>
                    <div class="flex flex-col sm:flex-row justify-center lg:justify-start gap-4">
                        <a href="/solution" class="px-8 py-3 bg-white font-semibold rounded-lg shadow-navy hover:bg-gray-100 transition-colors duration-300 text-navy-900">Learn the Solution</a>
                        <a href="/action" class="px-8 py-3 border-2 border-yellow-400 bg-yellow-400 text-gray-900 font-semibold rounded-lg hover:bg-yellow-500 hover:border-yellow-500 transition-colors duration-300">Take Action</a>
                    </div>
                </div>
                
                <!-- Interactive Calculator -->
                <div class="w-full lg:w-1/2">
                    <div class="bg-white rounded-xl shadow-navy p-6">
                        <h3 class="text-xl font-bold mb-4 text-center lg:text-left text-navy-900">See how the crisis affects you</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Your annual household income:</label>
                            <input type="range" min="40000" max="400000" value="89300" class="w-full" id="income-slider">
                            <div class="flex justify-between text-sm text-gray-600">
                                <span>$40k</span>
                                <span id="income-value" class="font-bold">$89,300</span>
                                <span>$400k</span>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Your savings per year:</label>
                            <input type="range" min="5000" max="50000" value="15000" class="w-full" id="savings-slider">
                            <div class="flex justify-between text-sm text-gray-600">
                                <span>$5k</span>
                                <span id="savings-value" class="font-bold">$15,000</span>
                                <span>$50k</span>
                            </div>
                        </div>
                        <div id="simulator-results" class="space-y-4">
                            <!-- Results will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Crisis Indicators -->
    <section class="py-16 bg-white">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12 text-navy-900">By the numbers: Burlington's housing crisis</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-blue-50 p-6 rounded-xl border-l-4 border-red-500 transition-all duration-300 hover:-translate-y-1 hover:shadow-md">
                    <div class="text-4xl font-bold text-red-600 mb-2">7.5x</div>
                    <h3 class="text-xl font-semibold mb-2 text-navy-900">Price-to-Income Ratio</h3>
                    <p class="text-gray-600">Burlington homes cost <span class="font-bold">7.5 times</span> the median household income. A healthy ratio is 4x.</p>
                </div>
                <div class="bg-blue-50 p-6 rounded-xl border-l-4 border-red-500 transition-all duration-300 hover:-translate-y-1 hover:shadow-md">
                    <div class="text-4xl font-bold text-red-600 mb-2">1.8%</div>
                    <h3 class="text-xl font-semibold mb-2 text-navy-900">Vacancy Rate</h3>
                    <p class="text-gray-600">Rental vacancy is at a crisis level. A healthy market has 3-4% vacancy.</p>
                </div>
                <div class="bg-blue-50 p-6 rounded-xl border-l-4 border-red-500 transition-all duration-300 hover:-translate-y-1 hover:shadow-md">
                    <div class="text-4xl font-bold text-red-600 mb-2">#1</div>
                    <h3 class="text-xl font-semibold mb-2 text-navy-900">Worst in Construction</h3>
                    <p class="text-gray-600">Burlington has the <span class="font-bold">lowest construction rate</span> per capita compared to cities around the GTA.</p>
                </div>
            </div>
            <div class="text-center mt-12">
                <a href="/problem" class="px-6 py-3 text-white font-medium rounded-lg shadow-navy bg-navy-900 hover:bg-navy-800">Explore the Full Data</a>
            </div>
        </div>
    </section>

    <!-- Problem Section Preview -->
    <section class="py-20 bg-gray-100">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-16 text-navy-900">Understanding the Problem</h2>
            
            <!-- Price vs Income Section -->
            <div class="flex flex-col lg:flex-row gap-10 mb-20">
                <div class="w-full lg:w-2/3">
                    <div class="p-6 rounded-xl h-full shadow-navy border-l-4 border-navy-900 bg-gradient-to-r from-blue-50 to-indigo-50">
                        <h3 class="text-2xl font-semibold mb-4 text-navy-900">Price vs. Income Growth</h3>
                        <p class="text-gray-700 mb-6">While incomes have stagnated, housing prices have skyrocketed, creating an impossible affordability gap.</p>
                        <div class="h-64">
                            <canvas id="preview-price-income-chart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="w-full lg:w-1/3 flex items-center">
                    <div class="p-6 rounded-lg shadow-navy text-white bg-navy-900">
                        <h4 class="text-lg font-semibold mb-3">Why This Matters</h4>
                        <p class="text-sm">When home prices grow much faster than incomes, homeownership becomes unattainable for most residents. This chart shows how Burlington's housing market has become increasingly disconnected from what people can actually afford.</p>
                    </div>
                </div>
            </div>
            
            <!-- Comparison Section -->
            <div class="p-6 rounded-xl mb-20 shadow-navy border-l-4 border-navy-900 bg-gradient-to-r from-blue-50 to-indigo-50">
                <h3 class="text-2xl font-semibold mb-4 text-navy-900">How Burlington Compares</h3>
                <p class="text-gray-700 mb-6">Burlington has one of the worst housing metrics in the GTA.</p>
                <div class="h-64">
                    <canvas id="preview-comparison-chart"></canvas>
                </div>
                <div class="text-center mt-6">
                    <a href="/problem" class="font-semibold hover:underline text-navy-900">See full comparison â†’</a>
                </div>
            </div>
            
            <!-- Housing Gap Section -->
            <div class="flex flex-col lg:flex-row gap-10">
                <div class="w-full lg:w-1/3 flex items-center">
                    <div class="p-6 rounded-lg shadow-navy text-white bg-navy-900">
                        <h4 class="text-lg font-semibold mb-3">The Housing Gap Explained</h4>
                        <p class="text-sm">Burlington has consistently built fewer homes than needed to keep up with population growth. This supply shortage is a primary driver of our affordability crisis, as demand far outstrips available housing.</p>
                    </div>
                </div>
                <div class="w-full lg:w-2/3">
                    <div class="p-6 rounded-xl h-full shadow-navy border-l-4 border-navy-900 bg-gradient-to-r from-blue-50 to-indigo-50">
                        <h3 class="text-2xl font-semibold mb-4 text-navy-900">The Growing Housing Gap</h3>
                        <p class="text-gray-700 mb-6">Burlington has consistently built fewer homes than needed to keep up with population growth.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-700">Homes needed:</span>
                                    <span class="font-bold">82,918</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-4">
                                    <div class="bg-red-600 h-4 rounded-full" style="width: 100%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-700">Homes available:</span>
                                    <span class="font-bold">75,971</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-4">
                                    <div class="h-4 rounded-full bg-green-600" style="width: 91.6%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <a href="/problem" class="font-semibold hover:underline text-navy-900">Explore housing gap data â†’</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Solution Section Preview -->
    <section class="py-20 bg-white">
        <div class="max-w-6xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4 text-navy-900">The Solution: Missing Middle Housing</h2>
                <p class="text-xl text-gray-700 max-w-3xl mx-auto">We need to reform Burlington's zoning laws to allow more diverse housing types in residential neighborhoods.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mb-12">
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-navy-900">What is "Missing Middle" Housing?</h3>
                    <p class="text-gray-700 mb-6">These are medium-density housing types like duplexes, triplexes, fourplexes, townhomes, and laneway suites that fit seamlessly into existing neighborhoods.</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="p-2 rounded-full mr-4 bg-navy-100">
                                <svg class="w-6 h-6 text-navy-900" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-semibold text-navy-900">Creates gentle density</h4>
                                <p class="text-gray-600 text-sm">Uses existing infrastructure without overwhelming neighborhoods</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="p-2 rounded-full mr-4 bg-navy-100">
                                <svg class="w-6 h-6 text-navy-900" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-semibold text-navy-900">Provides naturally affordable options</h4>
                                <p class="text-gray-600 text-sm">More units per lot means lower prices for homeowners and renters</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="p-6 rounded-xl shadow-navy bg-navy-50">
                    <h3 class="text-xl font-semibold mb-4 text-navy-900">Our Policy Proposal</h3>
                    <div class="space-y-4">
                        <div class="flex items-center p-4 bg-white rounded-lg shadow-navy">
                            <div class="text-2xl font-bold mr-4 text-navy-900">1</div>
                            <p class="font-medium">Legalize 4-unit buildings "as-of-right" in residential zones</p>
                        </div>
                        <div class="flex items-center p-4 bg-white rounded-lg shadow-navy">
                            <div class="text-2xl font-bold mr-4 text-navy-900">2</div>
                            <p class="font-medium">Streamline approval processes for missing middle housing</p>
                        </div>
                        
                    </div>
                </div>
            </div>
            
            <div class="text-center">
                <a href="/solution" class="px-6 py-3 text-white font-medium rounded-lg shadow-navy bg-navy-900 hover:bg-navy-800">Learn About the Solution</a>
            </div>
        </div>
    </section>

    <!-- Action Section Preview -->
    <section class="py-20 bg-gray-100">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-6 text-navy-900">Help us solve Burlington's housing crisis</h2>
            <p class="text-xl mb-8 max-w-3xl mx-auto text-gray-700">Change won't happen without community support. Send a message to city council that you support missing middle housing reform.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                <div class="bg-white p-6 rounded-lg shadow-navy">
                    <div class="text-4xl mb-4">ðŸ“§</div>
                    <h3 class="text-xl font-semibold mb-2 text-navy-900">Email Your Councillor</h3>
                    <p class="mb-4 text-gray-600">Send a pre-written email to your city councillor in under 60 seconds.</p>
                    <a href="/action" class="block w-full py-2 px-4 rounded-lg font-medium text-white shadow-navy bg-navy-900 hover:bg-navy-800">Send Email</a>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow-navy">
                    <div class="text-4xl mb-4">ðŸ“…</div>
                    <h3 class="text-xl font-semibold mb-2 text-navy-900">Attend a Meeting</h3>
                    <p class="mb-4 text-gray-600">Join city council meetings to voice your support for housing reform.</p>
                    <a href="/action" class="block w-full py-2 px-4 rounded-lg font-medium text-white shadow-navy bg-navy-900 hover:bg-navy-800">Find Meetings</a>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow-navy">
                    <div class="text-4xl mb-4">ðŸ“£</div>
                    <h3 class="text-xl font-semibold mb-2 text-navy-900">Sign The Petition</h3>
                    <p class="mb-4 text-gray-600">Sign the petition to make a real impact in your own community</p>
                    <a href="/action" class="block w-full py-2 px-4 rounded-lg font-medium text-white shadow-navy bg-navy-900 hover:bg-navy-800">Share</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-300">
    <div class="max-w-6xl mx-auto px-4 py-10 flex flex-col md:flex-row items-center justify-between gap-4">
      <div>
        <div class="text-xl font-bold text-white">BuildBurlington</div>
        <div class="text-slate-400 text-sm">A campaign for housing solutions</div>
      </div>
      <div class="flex gap-6 text-sm">
        <a href="/action" class="hover:text-white">Take Action</a>
        <a href="/sources" class="hover:text-white">Data Sources</a>
      </div>
    </div>
    <div class="border-t border-slate-800">
      <div class="max-w-6xl mx-auto px-4 py-6 text-center text-slate-500 text-sm">
        Â© 2024 BuildBurlington. All data from public sources including CMHC, Statistics Canada, and City of Burlington reports.
      </div>
    </div>
  </footer>

    <script>
        // ===== GLOBAL VARIABLES =====
        let priceIncomeChart = null;
        let comparisonChart = null;
        let rentChart = null;
        let vacancyChart = null;
        let timelineVRChart = null;
        let timelinePopChart = null;
        let burlingtonPieChart = null;
        let cityComparisonChart = null;

        // ===== UTILITY FUNCTIONS =====
        const parseNum = (v) => (typeof v === 'number' ? v : parseFloat(String(v).replace(/[^0-9.\-]/g, '')));
        const moneyFmt = (n) => n != null && !isNaN(n) ? '$' + Math.round(n).toLocaleString() : 'â€”';
        const pctFmt = (n) => n != null && !isNaN(n) ? (Math.round(n * 10) / 10) + '%' : 'â€”';

        // ===== HAMBURGER MENU FUNCTIONALITY =====
        function initHamburgerMenu() {
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (!hamburgerBtn || !mobileMenu) return;
            
            hamburgerBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                hamburgerBtn.classList.toggle('hamburger-active');
                mobileMenu.classList.toggle('mobile-menu-open');
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                const isClickInsideMenu = mobileMenu.contains(e.target);
                const isClickOnHamburger = hamburgerBtn.contains(e.target);
                
                if (!isClickInsideMenu && !isClickOnHamburger && mobileMenu.classList.contains('mobile-menu-open')) {
                    hamburgerBtn.classList.remove('hamburger-active');
                    mobileMenu.classList.remove('mobile-menu-open');
                }
            });
            
            // Close menu when a link is clicked
            const mobileLinks = mobileMenu.querySelectorAll('a');
            mobileLinks.forEach(link => {
                link.addEventListener('click', () => {
                    hamburgerBtn.classList.remove('hamburger-active');
                    mobileMenu.classList.remove('mobile-menu-open');
                });
            });
        }

        // ===== HOME PAGE CALCULATOR =====
        function initHomeCalculator() {
            const incomeSlider = document.getElementById('income-slider');
            const incomeValue = document.getElementById('income-value');
            const savingsSlider = document.getElementById('savings-slider');
            const savingsValue = document.getElementById('savings-value');
            const simulatorResults = document.getElementById('simulator-results');
            
            if (!incomeSlider || !savingsSlider) return;
            
            function updateCalculator() {
                const income = parseInt(incomeSlider.value);
                const savings = parseInt(savingsSlider.value);
                incomeValue.textContent = `$${income.toLocaleString()}`;
                savingsValue.textContent = `$${savings.toLocaleString()}`;
                
                const affordablePrice = income * 4;
                const downPaymentYears = ((1100000 * 0.2) / savings).toFixed(1);
                const affordableMortgage = (affordablePrice * 0.05 / 12).toFixed(0);
                const actualMortgage = (1100000 * 0.05 / 12).toFixed(0);
                
                simulatorResults.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span>Affordable home price:</span>
                        <span class="font-bold text-green-600">$${affordablePrice.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>Actual Burlington median price:</span>
                        <span class="font-bold text-red-600">$1,100,000</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>Monthly mortgage payment (at affordable price):</span>
                        <span class="font-bold">$${affordableMortgage}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>Monthly mortgage payment (at actual price):</span>
                        <span class="font-bold text-red-600">$${actualMortgage}</span>
                    </div>
                    <div class="flex justify-between items-center border-t pt-2">
                        <span>Years to save a 20% down payment:</span>
                        <span class="font-bold text-red-600">${downPaymentYears} years</span>
                    </div>
                `;
            }
            
            incomeSlider.addEventListener('input', updateCalculator);
            savingsSlider.addEventListener('input', updateCalculator);
            updateCalculator();
        }

        // ===== PREVIEW CHARTS FOR HOMEPAGE =====
        function initPreviewCharts() {
            const priceIncomePreviewCtx = document.getElementById('preview-price-income-chart');
            const comparisonPreviewCtx = document.getElementById('preview-comparison-chart');
            
            if (priceIncomePreviewCtx) {
                // Simplified version of price vs income chart for homepage with single y-axis
                const years = ['2015', '2017', '2019', '2021', '2023'];
                const priceData = [510000, 650000, 780000, 1050000, 1100000];
                const incomeData = [80800, 83400, 84800, 92000, 89300];
                
                new Chart(priceIncomePreviewCtx, {
                    type: 'line',
                    data: {
                        labels: years,
                        datasets: [
                            {
                                label: 'Median Home Price',
                                data: priceData,
                                borderColor: 'rgb(239, 68, 68)',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                tension: 0.3,
                                fill: true,
                                yAxisID: 'y'
                            },
                            {
                                label: 'Median Income',
                                data: incomeData,
                                borderColor: 'rgb(59, 130, 246)',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.3,
                                fill: true,
                                yAxisID: 'y'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { position: 'bottom' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        label += context.parsed.y !== null ? '$' + context.parsed.y.toLocaleString() : '';
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: { 
                                display: true,
                                type: 'linear',
                                title: {
                                    display: true,
                                    text: 'Dollars ($)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            if (comparisonPreviewCtx) {
                // Simplified comparison chart for homepage
                const cities = ['Burlington', 'Oakville', 'Milton', 'Hamilton'];
                const completionData = [0.8, 1.2, 1.5, 1.4];
                
                new Chart(comparisonPreviewCtx, {
                    type: 'bar',
                    data: {
                        labels: cities,
                        datasets: [{
                            label: 'Housing Completions per 1,000 Residents',
                            data: completionData,
                            backgroundColor: [
                                'rgba(239, 68, 68, 0.8)',
                                'rgba(59, 130, 246, 0.6)',
                                'rgba(59, 130, 246, 0.6)',
                                'rgba(59, 130, 246, 0.6)'
                            ],
                            borderColor: [
                                'rgb(239, 68, 68)',
                                'rgb(59, 130, 246)',
                                'rgb(59, 130, 246)',
                                'rgb(59, 130, 246)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.parsed.y;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: { 
                                display: true,
                                title: {
                                    display: true,
                                    text: 'Completions per 1,000 Residents'
                                },
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
        }

        // ===== INITIALIZE PAGE-SPECIFIC FUNCTIONALITY =====
        function initPageSpecific() {
            const bodyId = document.body.id;
            
            switch(bodyId) {
                case 'home-page':
                    initHomeCalculator();
                    initPreviewCharts();
                    break;
            }
        }

        // ===== DOCUMENT READY =====
        document.addEventListener('DOMContentLoaded', function() {
            initHamburgerMenu();
            initPageSpecific();
        });
    </script>
</body>
</html>